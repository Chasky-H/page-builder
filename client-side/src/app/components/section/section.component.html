<div #sectionContainer class="section-container" [ngClass]="{ 'editable-state': editable, 'active-section': selected }" 
    cdkDrag [cdkDragDisabled]="!editable" (cdkDragStarted)="onDragStart($event)" (cdkDragEnded)="onDragEnd($event)" >
    <toolbar-actions *ngIf="editable && canDrag" cdkDragHandle style="cursor: grab;"
        class="section-toolbar" [title]="name" [isDraggable]="true"
        (edit)="onEditSectionClick();" (remove)="onRemoveSectionClick()"></toolbar-actions>
    <div class="section-background">
        <div class="back-template" *ngFor="let number of [0,1,2,3,4,5,6,7,8,9,10,11]"></div>
    </div>
    <div #columnsWrapper class="columns-wrapper">
        <div [id]="sectionColumnKeyPrefix + i" 
            *ngFor="let column of columns; let i=index;"
            class="section-column {{screenSize <= pepScreenSizeToFlipToVertical ? 'horizontal' : 'vertical'}}"
            [ngClass]="{ 'active-column': selectedBlockId === column.Block?.BlockKey, 'remove-empty-column': !editable && !column.Block }"
            cdkDropList
            [cdkDropListData]="column"
            [cdkDropListOrientation]="screenSize <= pepScreenSizeToFlipToVertical ? 'horizontal' : 'vertical'" 
            [cdkDropListConnectedTo]="sectionsColumnsDropList"
            (cdkDropListDropped)="onBlockDropped($event)"
            [cdkDropListEnterPredicate]="canDropPredicate(i)"
        >
            <div *ngIf="column.Block && pageBuilderService.pageBlocksMap.get(column.Block.BlockKey)" 
                class="section-column-block"
                cdkDrag [cdkDragData]="column.Block" [cdkDragDisabled]="!editable" (cdkDragStarted)="onDragStart($event)" (cdkDragEnded)="onDragEnd($event)" >
                <!-- <div *cdkDragPlaceholder class="field-placeholder"></div> -->
                <toolbar-actions *ngIf="editable && canDrag" cdkDragHandle style="cursor: grab;"
                    class="block-toolbar" [title]="pageBuilderService.pageBlocksMap.get(column.Block.BlockKey).Relation?.Description" [isDraggable]="true"
                    (edit)="onEditBlockClick(column.Block.BlockKey);" (remove)="onRemoveBlockClick(column.Block.BlockKey)">
                </toolbar-actions>
                <div [ngClass]="{'block-editable-state': editable }">
                    <pep-remote-loader 
                        [options]="pageBuilderService.pageBlocksMap.get(column.Block.BlockKey).Relation?.Options"
                        [hostObject]="pageBuilderService.pageBlocksMap.get(column.Block.BlockKey).Configuration"
                        (hostEvents)="onBlockChange($event, column.Block.BlockKey);">
                    </pep-remote-loader>
                </div>
            </div>
        </div>
    </div>
</div>
