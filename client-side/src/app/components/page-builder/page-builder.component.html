<!-- <pep-section
        [numOfBlocks]="6"
        [editable]="editable">
</pep-section>
<pep-section
        [numOfBlocks]="2"
        [editable]="editable">
</pep-section> -->


<div class="page-builder-container">
    <div class="top-area">
        <pep-top-bar [inline]="false" [title]="">
            <div header-start-content class="header-start-content">
                    <div class="header-start">{{('ViewportWidth' | translate)}} : <b>{{viewportWidth}}</b></div>

                    <pep-group-buttons sizeType="sm"  [buttons]="groupButtons" [buttonsClass]="'sm regular'" [buttonsDisabled]="false"
                        [viewType]="'split'" >
                    </pep-group-buttons>
                    <div class="header-end">
                    <pep-button  [sizeType]="'md'" [styleType]="'system'" [iconName]="'view_card_md'">
                    </pep-button>

                    <pep-button [value]="'Publish' | translate" [sizeType]="'md'" classNames="pep-spacing-element" [styleType]="'strong'" (buttonClick)="publishPage(addonUUID);">
                    </pep-button>
                    <pep-button [value]="'Load Page' | translate" [sizeType]="'md'" classNames="pep-spacing-element" [styleType]="'strong'" (buttonClick)="buildSections(sectionsSubject$);">
                    </pep-button>
                    <pep-button [value]="'Clear Page' | translate" [sizeType]="'md'" classNames="pep-spacing-element" [styleType]="'strong'" (buttonClick)="clearPage();">
                    </pep-button>
                </div>
            </div>

            <div header-end-content>

                <!-- <pep-checkbox
                        class="pep-spacing-element"
                        [value]="true"
                        [label]="'Edit/Preview'"
                        type="checkbox"
                        [mandatory]="false"
                        [showTitle]="false"
                        [disabled]="false"
                        xAlignment="left"

                        [visible]="true"
                        (valueChange)="changeQueryParam($event)"
                ></pep-checkbox> -->
            </div>
        </pep-top-bar>
        <!-- <div id="top-area-left">
            <span>{{('ViewportWidth' | translate) + ': ' + viewportWidth}}</span>
        </div> -->
        <!-- <div id="top-area-center">
            <pep-group-buttons sizeType="sm"  [buttons]="groupButtons" [buttonsClass]="'md regular'" [buttonsDisabled]="false"
            [viewType]="'regular'" >
            </pep-group-buttons>
        </div> -->

        <!-- <div id="top-area-right">
            <pep-button  [sizeType]="'md'" [styleType]="'system'" [iconName]="'view_card_md'">
            </pep-button>
            <pep-checkbox
                    class="pep-spacing-element"
                    [value]="true"
                    [label]="'Edit/Preview'"
                    type="checkbox"
                    [mandatory]="false"
                    [disabled]="false"
                    xAlignment="left"

                    [visible]="true"
                    (valueChange)="changeQueryParam($event)"
            ></pep-checkbox>
            <pep-button [value]="'Publish' | translate" [sizeType]="'md'" [styleType]="'strong'" (buttonClick)="publishPage(addonUUID);">
            </pep-button>
            <pep-button [value]="'Load Page' | translate" [sizeType]="'md'" [styleType]="'strong'" (buttonClick)="buildSections(sectionsSubject$);">
            </pep-button>
            <pep-button [value]="'Clear Page' | translate" [sizeType]="'md'" [styleType]="'strong'" (buttonClick)="clearPage();">
            </pep-button>


        </div> -->
    </div>
    <div #sectionsCont   cdkDropListGroup>
        <div class="sections-container" *ngFor="let section of sectionsSubject$ | async as sections; let i=index;">
           <div *ngIf="editable" class="section-edit" [ngClass]="{'editable': editable}">
                <div class="start-cont">
                    <pep-button *ngIf="editable" [sizeType]="'sm'" [classNames]="'pep-spacing-element'"
                        [iconName]="'system_move'">
                    </pep-button>
                    <label class="header-label body-sm pep-spacing-element">{{'Section ' + (i+1)}}</label>
                    </div>
                <div>
                <pep-button *ngIf="editable" [classNames]="'caution pep-spacing-element'" [sizeType]="'sm'"
                   [iconName]="'system_bin'" (buttonClick)="remove(sections, i);">
               </pep-button>
               <pep-button *ngIf="editable" [sizeType]="'sm'" [classNames]="'pep-spacing-element'"
                    [iconName]="'system_edit'">
                </pep-button>
               </div>


           </div>
           <div cdkDropList  cdkDropListOrientation="horizontal" id="{{'section-' + (i+1)}}"
               (cdkDropListDropped)="drop($event)"
               [cdkDropListData]="section"
               (cdkDropListEntered)="entered()"
               (cdkDropListExited)="exited($event)"

                      [ngClass]="{'editable': editable}"
                      cdkDragBoundary=".page-builder-container"
               [ngClass]="{'editable': editable}"
               #htmlSections class="flex-container active"
                >
                   <div #htmlBlocks cdkDrag [cdkDragDisabled]="!editable" [cdkDragData]="block"
                      [ngClass]="{'editable': editable}"
                      cdkDragBoundary=".page-builder-container"
                      class="flex-item" *ngFor="let block of section; let i=index;">
                           <div *ngIf="editable" [ngClass]="{'editable': editable}" class="block-edit">
                               <pep-button [classNames]="'caution remove-addon '"
                                     sizeType="sm"
                                   [iconName]="'system_bin'" (buttonClick)="remove(section, i);">
                               </pep-button>
                               <pep-button  [classNames]="'pep-spacing-element '" [sizeType]="'sm'"
                               [iconName]="'system_edit'">
                                </pep-button>
                           </div>
                           <div>
                               <addon-proxy *ngIf="block" [hostObject]="block" (hostEvents)="onAddonChange($event);">
                               </addon-proxy>
                           </div>

                   </div>

           </div>
       </div>
    </div>




    <br>
    <pep-button *ngIf="editable" [value]="'Add Section'" class="add-section-button"
        [iconName]="'number_plus'" (buttonClick)="addSection($event)" [classNames]="'pep-spacing-element '" >
    </pep-button>

</div>


