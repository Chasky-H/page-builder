<pep-page-layout [addPadding]="false" [showShadow]="showEditor && currentEditor">
    <div pep-side-area *ngIf="showEditor && currentEditor" style="padding-inline-start: 1rem; height: inherit;">
        <pep-side-bar #sideBar [ignoreResize]="true" (stateChange)="onSidebarStateChange($event)">
            <div header-content class="side-bar-title">
                <pep-button class="back-button" sizeType="sm" iconName="arrow_left_alt" (buttonClick)="onNavigateBackFromEditor();"></pep-button>
                <div class=" title-xl ellipsis" [title]="currentEditor?.title">
                    <span>{{ currentEditor?.title }}</span>
                </div>
            </div>
            <page-builder-editor *ngIf="currentEditor?.type === 'page-builder'" [sectionsColumnsDropList]="sectionsColumnsDropList"
                [hostObject]="currentEditor?.hostObject" (hostObjectChange)="onPageEditorObjectChange($event)"></page-builder-editor>
        
            <section-editor *ngIf="currentEditor?.type === 'section'" 
                [hostObject]="currentEditor?.hostObject" (hostObjectChange)="onSectionEditorObjectChange($event)"></section-editor>
        
            <pep-remote-loader *ngIf="currentEditor?.type === 'block'" [options]="currentEditor?.remoteModuleOptions" 
                [hostObject]="currentEditor?.hostObject" (hostEvents)="onBlockEditorHostEvents($event);"></pep-remote-loader>
        </pep-side-bar>
    </div>
    <ng-container pep-main-area>
        <div class="main-area-container">
            <div class="header-container">
                <div class="header-content ">
                    <span class="header-title body-xs">{{('PAGE_MANAGER.VIEWPORT_WIDTH' | translate)}}:&nbsp;</span>
                    <span class="body-xs"><b>{{viewportWidth}}</b></span>
                </div>
                <div class="header-group-btn">
                    <pep-group-buttons [buttons]="screenTypes" [selectedButtonKey]="selectedScreenType" class="header-content" sizeType="sm" viewType="toggle" >
                    </pep-group-buttons>
                </div>
                <div class="header-end header-content">
                    <pep-menu sizeType="sm" classNames="pep-spacing-element" [items]="menuItems" (menuItemClick)="onMenuItemClick($event)"></pep-menu>
                    <pep-button [value]="'ACTIONS.PREVIEW' | translate" sizeType="sm" classNames="pep-spacing-element" (buttonClick)="togglePreviewMode()"></pep-button>
                    <pep-button [value]="'ACTIONS.SAVE' | translate" sizeType="sm" classNames="pep-spacing-element" (buttonClick)="onSaveClick()"></pep-button>
                    <pep-button [value]="'ACTIONS.PUBLISH' | translate" sizeType="sm" classNames="pep-spacing-element" styleType="strong" (buttonClick)="onPublishClick();">
                    </pep-button>
                </div>
            </div>
            <div #pageBuilderWrapper class="page-builder-wrapper" [ngClass]="{'limit-min-width': selectedScreenType === 'Landscape' }">
                <page-builder [editMode]="showEditor" [selectedScreenType]="selectedScreenType" [screenSize]="screenSize" [sectionsColumnsDropList]="sectionsColumnsDropList"></page-builder>
                <div *ngIf="showEditor" class="backdrop" [ngClass]="{'show-backdrop': currentEditor?.type === 'section' || currentEditor?.type === 'block'}"></div>
            </div>
        </div>
    </ng-container>
</pep-page-layout>
