<pep-page-layout [addPadding]="false" [showShadow]="showEditor">
    <div pep-side-area *ngIf="showEditor" style="padding-inline-start: 1rem;">
        <pep-side-bar #sideBar [ignoreResize]="true" (stateChange)="onSidebarStateChange($event)">
            <div header-content class="side-bar-title">
                <pep-button class="back-button" sizeType="sm" iconName="arrow_left_alt" (buttonClick)="navigateBackFromEditor();"></pep-button>
                <div class=" title-xl ellipsis" title="{{ currentEditor?.title }}">
                    <span>{{ currentEditor?.title }}</span>
                </div>
            </div>
            <page-builder-editor *ngIf="currentEditor?.type === 'page-builder'" [sectionsColumnsDropList]="sectionsColumnsDropList"
                [hostObject]="currentEditor?.hostObject" (hostObjectChange)="onPageEditorObjectChange($event)"></page-builder-editor>
        
            <page-builder-section-editor *ngIf="currentEditor?.type === 'section'" 
                [hostObject]="currentEditor?.hostObject" (hostObjectChange)="onSectionEditorObjectChange($event)"></page-builder-section-editor>
        
            <pep-remote-loader *ngIf="currentEditor?.type === 'block'" [options]="currentEditor?.remoteModuleOptions" 
                [hostObject]="currentEditor?.hostObject" (hostEvents)="onBlockEditorObjectChange($event);"></pep-remote-loader>
        </pep-side-bar>
    </div>
    <ng-container pep-main-area>
        <div class="main-area-container">
            <div class="header-container">
                <div class="header-content ">
                    <span class="header-title body-xs">{{('ViewportWidth' | translate)}}:&nbsp;</span>
                    <span class="body-xs"><b>{{viewportWidth}}</b></span>
                </div>
                <div class="header-group-btn">
                    <pep-group-buttons [buttons]="screenOptions" [selectedButtonKey]="selectedScreenKey" class="header-content" sizeType="sm" viewType="toggle" >
                    </pep-group-buttons>
                </div>
                <div class="header-end header-content">
                    <pep-button iconName="view_card_md" sizeType="sm" classNames="pep-spacing-element"></pep-button>
                    <pep-button value="Preview" sizeType="sm" classNames="pep-spacing-element" (buttonClick)="togglePreviewMode()"></pep-button>
                    <pep-button [value]="'Publish' | translate" sizeType="sm" classNames="pep-spacing-element" styleType="strong" (buttonClick)="publishPage();">
                    </pep-button>
                    <!-- <pep-button [value]="'Load Page' | translate" [sizeType]="'md'" classNames="pep-spacing-element" [styleType]="'strong'" (buttonClick)="buildSections(sectionsSubject$);">
                    </pep-button>
                    <pep-button [value]="'Clear Page' | translate" [sizeType]="'md'" classNames="pep-spacing-element" [styleType]="'strong'" (buttonClick)="clearPage();">
                    </pep-button> -->
                </div>
            </div>
            <div #pageBuilderWrapper class="page-builder-wrapper" [ngClass]="{'limit-min-width': selectedScreenKey === 'desktop' }">
                <page-builder [editMode]="showEditor" [screenSize]="screenSize" [sectionsColumnsDropList]="sectionsColumnsDropList"></page-builder>
                <div class="backdrop" [ngClass]="{'show-backdrop': currentEditor?.type === 'section' || currentEditor?.type === 'block'}"></div>
            </div>
        </div>
    </ng-container>
</pep-page-layout>
